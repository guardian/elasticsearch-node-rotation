stacks: [deploy]
regions: [eu-west-1]

deployments:
  elasticsearch-node-rotation-cloudformation:
    type: cloud-formation
    app: elk-data-node-rotation
    parameters:
      templatePath: cloudformation/cloudformation.yaml
  elasticsearch-node-rotation:
    dependencies: [cloudformation]
    type: aws-lambda
    parameters:
      prefixStack: false
      bucket: deploy-tools-dist
      fileName: elasticsearch-node-rotation.zip
      functionNames:
        - enr-cluster-status-check-
        - enr-get-oldest-node-
        - enr-add-node-
        - enr-cluster-size-check-
        - enr-migrate-shards-
        - enr-shard-migration-check-
        - enr-remove-node-
