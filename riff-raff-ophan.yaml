stacks: [ophan]
regions: [eu-west-1]

deployments:
  elasticsearch-node-rotation-cloudformation:
    type: cloud-formation
    app: es-node-rotation
    parameters:
      templatePath: cloudformation/cloudformation.yaml
  elasticsearch-node-rotation:
    dependencies: [elasticsearch-node-rotation-cloudformation]
    type: aws-lambda
    parameters:
      prefixStack: false
      bucket: ophan-dist
      fileName: elasticsearch-node-rotation.zip
      functionNames:
      - enr-cluster-status-check-
      - enr-get-oldest-node-
      - enr-add-node-
      - enr-cluster-size-check-
      - enr-migrate-shards-
      - enr-shard-migration-check-
      - enr-remove-node-
